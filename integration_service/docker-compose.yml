version: '3.8'  
  
services:  
  integration-service:  
    build: .  
    ports:  
      - "9000:9000"  
    environment:  
      - ATOMSPACE_API_URL=http://atomspace-api:8000  
      - NEURAL_MINER_URL=http://neural-miner:5000  
      - SHARED_VOLUME_PATH=/shared/output  
    volumes:  
      - shared_output:/shared/output  
      - ./cache:/app/cache  
    depends_on:  
      - atomspace-api  
      - neural-miner  
    networks:  
      - integration-network  
  
  atomspace-api:  
    image: abdum1964/atomspace-api:latest  
    volumes:  
      - shared_output:/shared/output  
    networks:  
      - integration-network  
  
  neural-miner:  
    build: ./submodules/neural-subgraph-miner  
    volumes:  
      - shared_output:/shared/output  
    networks:  
      - integration-network  
  
volumes:  
  shared_output:  
  
networks:  
  integration-network:  
    driver: bridge